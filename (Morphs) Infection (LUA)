local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local DebrisService = game:GetService("Debris")

local bloodAsset = game:GetObjects("rbxassetid://8317917339")[1]
local blood = bloodAsset:FindFirstChild("blood")
if blood then
	blood.Parent = ReplicatedStorage
end

local player = Players.LocalPlayer
local Character = player.Character or player.CharacterAdded:Wait()
local Head = Character:WaitForChild("Head")
local Humanoid = Character:WaitForChild("Humanoid")

local alpha = math.random(1,6)
local info = TweenInfo.new(60, Enum.EasingStyle.Quint, Enum.EasingDirection.In)
local goal = { Color = Color3.fromRGB(0, 0, 0) }

local function coughaura(headPart)
	if not headPart or headPart:IsDescendantOf(Character) then return end
	local targetChar = headPart.Parent
	if not targetChar or targetChar:FindFirstChild("AuraDone") then return end

	local auraFlag = Instance.new("BoolValue")
	auraFlag.Name = "AuraDone"
	auraFlag.Parent = targetChar

	local infoTween = TweenInfo.new(2, Enum.EasingStyle.Cubic, Enum.EasingDirection.Out)
	local goal = {Color = Color3.fromRGB(76,148,255), Size = Vector3.new(14,14,14), Transparency = 1}

	local effect = Instance.new("Part")
	effect.Shape = Enum.PartType.Ball
	effect.Color = Color3.fromRGB(255,255,255)
	effect.Material = Enum.Material.Ice
	effect.Size = Vector3.new(1,1,1)
	effect.Anchored = true
	effect.CanCollide = false
	effect.Position = headPart.Position
	effect.Parent = workspace

	local tween = TweenService:Create(effect, infoTween, goal)
	tween:Play()
	tween.Completed:Connect(function()
		effect:Destroy()
	end)
end

local function makeWhite(targetChar)
	if not targetChar or targetChar:FindFirstChild("InfectedFlag") then return end
	local humanoid = targetChar:FindFirstChild("Humanoid")
	local head = targetChar:FindFirstChild("Head")
	if not humanoid or not head then return end

	local flag = Instance.new("BoolValue")
	flag.Name = "InfectedFlag"
	flag.Parent = targetChar

	for _, c in ipairs(targetChar:GetDescendants()) do
		if c:IsA("Part") or c:IsA("MeshPart") then
			for _, face in ipairs(Enum.NormalId:GetEnumItems()) do
				local tex = Instance.new("Texture")
				tex.Texture = "rbxassetid://5079344858"
				tex.Face = face
				tex.Transparency = 0.7
				tex.Parent = c
			end
			local smoke = Instance.new("Smoke")
			smoke.Color = Color3.fromRGB(255,255,255)
			smoke.Size = 0.1
			smoke.Opacity = 0.02
			smoke.Parent = c

			c.Color = Color3.fromRGB(255,255,255)
			c.Material = Enum.Material.Glass
			TweenService:Create(c, info, goal):Play()
		elseif c:IsA("Accessory") or c:IsA("Shirt") or c:IsA("Pants") then
			c:Destroy()
		elseif c:IsA("Humanoid") then
			c.WalkSpeed = math.random(10,32)
			c.MaxHealth = math.random(1,60)
		end
	end

	coughaura(head)

	loopCough(targetChar)
end

function loopCough(targetChar)
	local humanoid = targetChar:FindFirstChild("Humanoid")
	local head = targetChar:FindFirstChild("Head")
	if not humanoid or not head then return end

	task.spawn(function()
		while humanoid.Health > 0 and targetChar.Parent do
			task.wait(math.random(5,10))

			local cough1 = Instance.new("Sound")
			cough1.SoundId = "rbxassetid://3047432613"
			cough1.Parent = head
			cough1:Play()

			local infoTween = TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)
			local goal = {Color = Color3.fromRGB(176,255,142), Size = Vector3.new(28,28,28), Transparency = 1}

			local effect1 = Instance.new("Part")
			effect1.Name = "effect1"
			effect1.Shape = Enum.PartType.Ball
			effect1.Color = Color3.fromRGB(255,255,255)
			effect1.Material = Enum.Material.Ice
			effect1.Size = Vector3.new(1,1,1)
			effect1.Anchored = false
			effect1.CanCollide = false
			effect1.Position = head.Position
			effect1.Parent = workspace
			
			effect1.Touched:Connect(function(hit)
				local target = hit:FindFirstAncestorWhichIsA("Model")
				if target and Players:GetPlayerFromCharacter(target) then
					if target ~= targetChar then
						makeWhite(target)
					end
				end
			end)

			local tween = TweenService:Create(effect1, infoTween, goal)
			tween:Play()
			tween.Completed:Connect(function()
				effect1:Destroy()
			end)
			
wait(0.1)
			
effect1.Anchored = true
		end
	end)
end

makeWhite(Character)

			